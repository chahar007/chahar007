"use strict";(self.webpackChunkwishes=self.webpackChunkwishes||[]).push([[11],{5011:(B,h,m)=>{m.r(h),m.d(h,{WishModule:()=>E});var p=m(6895),g=m(2655),t=m(1571);let v=(()=>{class n{constructor(){this.emitter=new t.vpe}emit(e){this.emitter.emit(e)}subscribe(e){return this.emitter.subscribe(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=m(1859),d=m(433),w=m(1884),b=m(8937),M=m(7579),O=m(6063);class P extends M.x{constructor(s=1/0,e=1/0,i=O.l){super(),this._bufferSize=s,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,s),this._windowTime=Math.max(1,e)}next(s){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:a,_windowTime:o}=this;e||(i.push(s),!r&&i.push(a.now()+o)),this._trimBuffer(),super.next(s)}_subscribe(s){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(s),{_infiniteTimeWindow:i,_buffer:r}=this,a=r.slice();for(let o=0;o<a.length&&!s.closed;o+=i?1:2)s.next(a[o]);return this._checkFinalizedStatuses(s),e}_trimBuffer(){const{_bufferSize:s,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,a=(r?1:2)*s;if(s<1/0&&a<i.length&&i.splice(0,i.length-a),!r){const o=e.now();let c=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)c=l;c&&i.splice(0,c+1)}}}let T=(()=>{class n{constructor(e,i){this.document=i,this.renderer=e.createRenderer(null,null)}createMeme(e){const i=new P;window.devicePixelRatio=2;const o=this.renderer.createElement("canvas");o.height=656,o.width=656,o.style.height=String("328px"),o.style.width=String("328px");const c=o.getContext("2d");c.imageSmoothingEnabled=!0;const l=this.renderer.createElement("img");return l.crossOrigin="anonymous",l.src=e.imageUrl,l.onerror=()=>{i.error({success:!1,message:"template image load failed"})},l.onload=()=>{var f=Math.min(o.width/l.width,o.height/l.height),C=l.width*f,_=l.height*f;c.drawImage(l,o.width/2-C/2,o.height/2-_/2,C,_),c.font="36px sans-serif",c.textAlign="center",c.textBaseline="middle",c.fillStyle="#FFFFFF",c.strokeStyle="#000000",c.lineWidth=10,e.title&&(c.strokeText(e.title,328,608,616),c.fillText(e.title,328,608,616));let Y=this.dataURLtoFile(o.toDataURL("image/png"),"image.png");const N=new Blob([Y],{type:"image/png"}),R=window.URL.createObjectURL(N),u=document.createElement("a");u.href=R,u.download="Greeting",u.click()},i.asObservable()}dataURLtoFile(e,i){for(var r=e.split(","),a=r[0].match(/:(.*?);/)[1],o=atob(r[1]),c=o.length,l=new Uint8Array(c);c--;)l[c]=o.charCodeAt(c);return new File([l],i,{type:a})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.FYo),t.LFG(p.K0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.templateSelected(a))}),t._UZ(1,"img",2),t.qZA()}if(2&n){const e=s.$implicit;t.ekj("selected",e.selected),t.xp6(1),t.Q6J("src",null==e?null:e.imgUrl,t.LSH)}}function S(n,s){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,y,2,3,"div",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.templates)}}function F(n,s){if(1&n&&(t.TgZ(0,"div",13)(1,"form",14),t._UZ(2,"textarea",15),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.formData)}}function Z(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.changeStep(2))}),t._uU(1," Next "),t.qZA()}}function U(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.submit())}),t._uU(1," Submit "),t.qZA()}if(2&n){const e=t.oxw();t.ekj("disabled",e.formData.invalid)}}let I=(()=>{class n{constructor(e,i){this.wishService=e,this.fb=i,this.selectedTemplate={imageUrl:"assets/images/card/c1.jpeg",title:"Dummy text to check the response of the user"},this.templates=b.y,this.step=1,this.userText=""}ngOnInit(){this.formData=this.fb.group({text:[this.selectedTemplate.value,d.kI.required]}),this.userInputSubs()}templateSelected(e){this.selectedTemplate.imageUrl=e.imgUrl,this.templates.map(i=>(i.selected=i.id==e.id,i))}changeStep(e){this.step=e}userInputSubs(){this.formData.get("text").valueChanges.pipe((0,w.x)()).subscribe(e=>{this.selectedTemplate.title=e.trim(),this.formData.get("text").setValue(e)})}submit(){this.formData.invalid||this.wishService.createMeme(this.selectedTemplate).subscribe(e=>{console.log("res",e)})}ngOnDestroy(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T),t.Y36(d.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-card"]],decls:13,vars:6,consts:[[1,"card-template"],[1,"sel-img"],["alt","",3,"src"],[1,"user-text"],["class","templates",4,"ngIf"],["class","user-input",4,"ngIf"],[1,"handle-ctas","d-flex","justify-content-center","mt-2"],[1,"btn","btn-info",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"templates"],["class","template",3,"selected","click",4,"ngFor","ngForOf"],[1,"template",3,"click"],[1,"user-input"],[3,"formGroup"],["type","text","id","input","rows","3","formControlName","text",1,"form-control"],[1,"btn","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div",3)(4,"p"),t._uU(5),t.qZA()()(),t.YNc(6,S,2,1,"div",4),t.YNc(7,F,3,1,"div",5),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return i.changeStep(1)}),t._uU(10,"Previous"),t.qZA(),t.YNc(11,Z,2,0,"button",8),t.YNc(12,U,2,2,"button",9),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("src",null==i.selectedTemplate?null:i.selectedTemplate.imageUrl,t.LSH),t.xp6(3),t.Oqu((null==i.selectedTemplate?null:i.selectedTemplate.title)||""),t.xp6(1),t.Q6J("ngIf",1===i.step),t.xp6(1),t.Q6J("ngIf",2===i.step),t.xp6(4),t.Q6J("ngIf",1==i.step),t.xp6(1),t.Q6J("ngIf",2==i.step))},dependencies:[p.sg,p.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u],styles:[".card-template[_ngcontent-%COMP%]{padding:1rem;width:100%;height:100%;display:flex;align-items:center;justify-content:space-around;flex-direction:column}.card-template[_ngcontent-%COMP%]   .sel-img[_ngcontent-%COMP%]{position:relative;border-radius:1rem;width:calc(100vw - 2rem);height:calc(100vw - 2rem)}.card-template[_ngcontent-%COMP%]   .sel-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:1rem}.card-template[_ngcontent-%COMP%]   .sel-img[_ngcontent-%COMP%]   .user-text[_ngcontent-%COMP%]{position:absolute;bottom:1rem}.card-template[_ngcontent-%COMP%]   .sel-img[_ngcontent-%COMP%]   .user-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;padding:0 1rem}.card-template[_ngcontent-%COMP%]   .user-input[_ngcontent-%COMP%]{height:20%;width:90%;display:flex;align-items:center;justify-content:center;flex-direction:row}.card-template[_ngcontent-%COMP%]   .user-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.card-template[_ngcontent-%COMP%]   .templates[_ngcontent-%COMP%]{padding-top:1rem;display:flex;align-items:center;justify-content:space-between;flex-direction:row;flex-flow:wrap}.card-template[_ngcontent-%COMP%]   .templates[_ngcontent-%COMP%]   .template[_ngcontent-%COMP%]{width:32%;padding:.5rem 1rem 0 0}.card-template[_ngcontent-%COMP%]   .templates[_ngcontent-%COMP%]   .template[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:1rem}.card-template[_ngcontent-%COMP%]   .templates[_ngcontent-%COMP%]   .template.selected[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:4px solid orange}.card-template[_ngcontent-%COMP%]   .handle-ctas[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 .5rem}"]}),n})();const W=[{path:"",component:(()=>{class n{constructor(e){this.eventEmitterService=e,this.selectedTemplates={}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-wish"]],decls:4,vars:0,consts:[[1,"create-wish-component"],[1,"sliders"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-card"),t.TgZ(2,"div",1),t._UZ(3,"app-slider"),t.qZA()())},dependencies:[x.P,I],styles:[".create-wish-component[_ngcontent-%COMP%]{width:100%;height:100%}"]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(W),g.Bz]}),n})();var J=m(4466);let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,k,J.m,d.UX]}),n})()}}]);